<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="../style.css" />
    <title>Quiz App</title>
  </head>
  <header>
    <a href="../mainPage.html">
      <img src="../choose.png" width="64px" height="64px" style="margin-left:15px;" alt="logo">
    </a>
    <h2 style="text-align: center">Result</h2>
  </header>
  <body>
    

    
    <p id="mail"></p>
    <table style="width:100%" border="1px solid black" id="result">
    
    </table>
    
    <p id=scores></p>
    
    <p id="p/f" style="font-size: larger;"></p>

    <script type="text/javascript">
    	var counter = localStorage.getItem("currentUser")
    	var obj = localStorage.getItem("user"+counter)
      obj = JSON.parse(obj)
      document.getElementById('mail').innerHTML =  "Hello " + obj.user_name + " " + obj.user_surname + " <br>Your Results:"
      var table = "<tr><th>Quiz Number</th><th>Score</th></tr>"
      var highest=0;
      for(var i=0;i<obj.score.length;i++){
        table = table + "<tr><td>"+(i+1)+".Try</td><td>"+obj.score[i]+"</td></tr>"
        if(obj.score[i]>highest){
          highest=obj.score[i];
        }
      }
      document.getElementById('result').innerHTML =table
      document.getElementById('scores').innerHTML = "Highest Score: "+highest+"<br>Latest Score: "+obj.score[obj.score.length-1];
      if(obj.score[obj.score.length-1]>=50){
        document.getElementById('p/f').innerHTML="You Passed"
      }
      else{
        var button = document.createElement("button");
        button.innerHTML = "Try Again";
        document.getElementById('p/f').appendChild(button);
        button.addEventListener("click",function(){
        window.location.href="../mainPage.html"
        })
      }
    </script>
  </body>
  <footer>
    <p>Â© Copyright 2020 CS 391 Web Development Project</p>
  </footer>
</html>
